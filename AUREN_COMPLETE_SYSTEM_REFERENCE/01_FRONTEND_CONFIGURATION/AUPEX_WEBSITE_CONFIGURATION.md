# AUPEX.AI WEBSITE CONFIGURATION
## Complete Nginx Setup and Deployment for the Main Marketing Website

*Last Updated: July 30, 2025*  
*Status: âœ… PRODUCTION OPERATIONAL*  
*Purpose: Serve the main marketing website and act as a reverse proxy for backend APIs.*

---

## ðŸŒ **WEBSITE OVERVIEW**

The `aupex.ai` website is the main public-facing marketing and information portal for AUREN. It is a static website built with HTML, CSS, and JavaScript, served by a robust Nginx container. It also serves as the primary reverse proxy, directing traffic to the appropriate backend services like the NEUROS AI and Biometric Bridge.

### **Live Deployment**
- **Production URL**: https://aupex.ai
- **Server**: 144.126.215.218 (DigitalOcean)
- **Technology**: Static HTML/CSS/JS, Nginx
- **Status**: âœ… LIVE AND ACCESSIBLE

---

## ðŸ—ï¸ **WEBSITE ARCHITECTURE**

### **Technology Stack**
```
AUPEX.AI Architecture:
â”œâ”€â”€ Static Site          # HTML, CSS, JavaScript files
â”œâ”€â”€ Nginx                # High-performance web server & reverse proxy
â”œâ”€â”€ Docker               # Containerization
â”œâ”€â”€ Let's Encrypt        # SSL Certificates for HTTPS
â””â”€â”€ DigitalOcean         # Hosting platform
```

### **Project Structure (Served Content)**
The content for the website is located in the `auren/dashboard_v2` directory.
```
auren/dashboard_v2/
â”œâ”€â”€ index.html           # Main landing page
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ neuros.html      # Page for the NEUROS agent
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js
â”‚   â””â”€â”€ neuros.js
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ main.css
â”‚   â””â”€â”€ neuros.css
â””â”€â”€ public/              # Static assets (images, etc.)
```

---

## âš™ï¸ **NGINX CONFIGURATION**

This is the complete, production Nginx configuration used on the server.

### **Main Configuration (`/etc/nginx/nginx.conf`)**
```nginx
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log warn;
pid /var/run/nginx.pid;

events {
    worker_connections 2048;
    use epoll;
    multi_accept on;
}

http {
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    # Logging
    log_format main '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';
    
    access_log /var/log/nginx/access.log main;

    # Performance optimizations
    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    client_max_body_size 50M;

    # Security headers for PHI protection
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains" always;
    add_header Content-Security-Policy "default-src 'self' https:; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline';" always;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_proxied any;
    gzip_comp_level 6;
    gzip_buffers 16 8k;
    gzip_http_version 1.1;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml+rss image/svg+xml;

    # Upstream for API
    upstream auren_api {
        server auren-api:8080;
    }

    # SSL configuration for TLS 1.3
    ssl_protocols TLSv1.3;
    ssl_prefer_server_ciphers off;
    ssl_session_cache shared:SSL:10m;
    ssl_session_timeout 10m;
    ssl_stapling on;
    ssl_stapling_verify on;

    # Main server block for aupex.ai
    server {
        listen 80;
        server_name aupex.ai www.aupex.ai;

        # Redirect HTTP to HTTPS
        return 301 https://$server_name$request_uri;
    }

    # HTTPS server block
    server {
        listen 443 ssl http2;
        server_name aupex.ai www.aupex.ai;

        # SSL certificates (will be generated by Certbot)
        ssl_certificate /etc/letsencrypt/live/aupex.ai/fullchain.pem;
        ssl_certificate_key /etc/letsencrypt/live/aupex.ai/privkey.pem;

        # Dashboard - serve static files
        root /usr/share/nginx/html;
        index index.html;

        # Dashboard routes
        location / {
            try_files $uri $uri/ /index.html;
            
            # Cache static assets
            location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
                expires 1y;
                add_header Cache-Control "public, immutable";
            }
        }

        # API proxy with PHI protection headers
        location /api/ {
            proxy_pass http://auren_api;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
            
            # PHI protection - no caching
            add_header Cache-Control "no-store, no-cache, must-revalidate, private" always;
            add_header Pragma "no-cache" always;
            
            # Timeouts for long-running requests
            proxy_connect_timeout 60s;
            proxy_send_timeout 60s;
            proxy_read_timeout 60s;
        }

        # WebSocket support
        location /ws/ {
            proxy_pass http://auren_api;
            proxy_http_version 1.1;
            proxy_set_header Upgrade $http_upgrade;
            proxy_set_header Connection "upgrade";
            proxy_set_header Host $host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
            proxy_set_header X-Forwarded-Proto $scheme;
        }

        # Health check endpoint
        location /health {
            proxy_pass http://auren_api/health;
        }
    }
}
```

---

## ðŸš€ **DEPLOYMENT PROCESS**

The website is deployed using a shell script that packages the local files, uploads them to the server, and restarts the Nginx container.

### **Deployment Script (`deploy_new_website.sh`)**
```bash
#!/bin/bash

echo "ðŸš€ Deploying New AUREN Website"
echo "=============================="

# 1. Package the website from local 'auren/dashboard_v2' directory
echo "ðŸ“¦ Creating deployment package..."
cd auren/dashboard_v2
tar -czf ../../auren-website.tar.gz .
cd ../..

# 2. Use expect script to securely upload and deploy
cat > deploy_website.exp << 'EOF'
#!/usr/bin/expect -f
set timeout 300
set password ".HvddX+@6dArsKd"

# Upload package to server
spawn scp auren-website.tar.gz root@144.126.215.218:/root/
expect {
    "password:" { send "$password\r"; exp_continue }
    "100%" { puts "\nâœ… Website uploaded!" }
    eof
}

# SSH into server to deploy
spawn ssh root@144.126.215.218
expect {
    "password:" { send "$password\r"; expect "# " }
}

send "cd /root/auren-production\r"
expect "# "

# Extract new website files
send "echo 'Extracting new website...'\r"
expect "# "
send "rm -rf auren/dashboard_v2/*\r"
expect "# "
send "mkdir -p auren/dashboard_v2\r"
expect "# "
send "tar -xzf /root/auren-website.tar.gz -C auren/dashboard_v2/\r"
expect "# "

# Restart Nginx container via Docker Compose
send "echo 'Starting nginx...'\r"
expect "# "
send "docker-compose -f docker-compose.prod.yml up -d nginx\r"
expect "# "

send "echo 'âœ… Website deployed!'\r"
expect "# "
send "exit\r"
expect eof
EOF

# 3. Execute and clean up the script
chmod +x deploy_website.exp
./deploy_website.exp
rm deploy_website.exp

echo ""
echo "âœ… DEPLOYMENT COMPLETE!"
echo "Visit: https://aupex.ai"
```

---

## âœ… **VERIFICATION & TESTING**

### **Health Check Commands**
```bash
# Test website accessibility
curl -I https://aupex.ai
# Expected: HTTP/2 200 OK

# Check for redirect from HTTP to HTTPS
curl -I http://aupex.ai
# Expected: HTTP/1.1 301 Moved Permanently
# Location: https://aupex.ai/

# Test API proxy through website
curl https://aupex.ai/api/health
# Expected: {"status":"healthy"}
```

### **Expected Results**
- âœ… `aupex.ai` loads correctly over HTTPS.
- âœ… HTTP traffic is automatically redirected to HTTPS.
- âœ… Security headers (X-Frame-Options, CSP, etc.) are present.
- âœ… API calls to `/api/` are proxied to the backend service.

---

## ðŸ”§ **TROUBLESHOOTING**

### **Common Issues**

#### **1. Website Not Loading (502 Bad Gateway)**
This usually means the Nginx container is running but cannot reach the upstream API service (`auren-api:8080`).
```bash
# Check the Nginx logs for specific errors
sshpass -p '.HvddX+@6dArsKd' ssh -o StrictHostKeyChecking=no root@144.126.215.218 'docker logs nginx --tail 20'

# Ensure the backend 'auren-api' container is running and on the same network
sshpass -p '.HvddX+@6dArsKd' ssh -o StrictHostKeyChecking=no root@144.126.215.218 'docker ps | grep auren-api'
```

#### **2. SSL/TLS Certificate Issues**
If there are certificate errors, you may need to renew the Let's Encrypt certificate.
```bash
# SSH into the server and run Certbot
sshpass -p '.HvddX+@6dArsKd' ssh -o StrictHostKeyChecking=no root@144.126.215.218 'docker run -it --rm --name certbot -v "/etc/letsencrypt:/etc/letsencrypt" -v "/var/lib/letsencrypt:/var/lib/letsencrypt" certbot/certbot renew --quiet'

# Reload Nginx to apply the new certificate
sshpass -p '.HvddX+@6dArsKd' ssh -o StrictHostKeyChecking=no root@144.126.215.218 'docker exec nginx nginx -s reload'
```

---

## ðŸ“ž **SUPPORT INFORMATION**

**Component**: `aupex.ai` Marketing Website  
**Technology**: Static HTML, Nginx, Docker  
**Status**: âœ… PRODUCTION OPERATIONAL  
**Configuration File**: `/etc/nginx/nginx.conf` (inside the Nginx container)

---

*This document provides the complete configuration for the `aupex.ai` website, including Nginx setup and deployment procedures.* 